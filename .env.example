# Kindred Environment Configuration
# Copy this file to .env and update with your values

# ====================
# LOCAL DEVELOPMENT DEFAULTS
# ====================
# These values are used for local development and testing ONLY.
# They are intentionally public and should NEVER be used in production.
# For production, use strong, unique values for all credentials.

# Local dev PocketBase admin account
# Used by: scripts, tests, API authentication in dev mode
DEV_POCKETBASE_EMAIL=admin@camp.local
DEV_POCKETBASE_PASSWORD=campbunking123

# ====================
# CampMinder API Configuration
# ====================

# API credentials (required for sync operations)
CAMPMINDER_API_KEY=your_campminder_api_key_here
CAMPMINDER_PRIMARY_KEY=your_primary_subscription_key_here
CAMPMINDER_SECONDARY_KEY=your_secondary_subscription_key_here
CAMPMINDER_CLIENT_ID=your_client_id_here

# Current season ID (update annually)
CAMPMINDER_SEASON_ID=2025

# ====================
# PocketBase Configuration
# ====================

# PocketBase Admin Setup
# The standard PocketBase image requires manual admin creation on first run.
# After starting the container, create an admin account:
# docker exec -it bunking-pocketbase /pb/pocketbase superuser create admin@example.com yourpassword
# 
# These variables are used by the solver and sync services to authenticate:
POCKETBASE_ADMIN_EMAIL=admin@example.com
POCKETBASE_ADMIN_PASSWORD=your-secure-password-here

# ====================
# AI Provider Configuration
# ====================

# AI provider for request parsing
# Supported providers: openai, anthropic, ollama
AI_PROVIDER=openai
AI_API_KEY=your_ai_api_key_here
AI_MODEL=gpt-4.1-nano

# ====================
# API Service Configuration
# ====================

# Number of parallel search workers for OR-Tools solver
# Higher values = faster solving but more CPU usage
# Default: 8 (good balance for most systems)
API_NUM_WORKERS=8

# API and solver log level (DEBUG shows constraint details, INFO for normal operation)
API_LOG_LEVEL=INFO

# ====================
# Authentication Configuration
# ====================

# AUTH_MODE options: bypass or production
# - bypass: Always authenticate as DevAdmin with admin privileges (development only)
# - production: Validate JWT tokens from OIDC provider
AUTH_MODE=production

# Admin Group Configuration
# Users with this group in their groups list will have admin privileges
ADMIN_GROUP_NAME=admin

# Admin User for UI Elements
# PocketBase user ID for admin-only UI access (Debug tab, Parsed Requests panel)
# Leave empty to show these elements to all users (default)
ADMIN_USER=

# ====================
# CORS and Session Configuration
# ====================

# Comma-separated list of allowed origins (no wildcards in production!)
# Example: https://bunking.yourdomain.com,https://app.yourdomain.com
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# Session Configuration
# Generate a secure random string for SESSION_SECRET in production
SESSION_SECRET=your-secure-session-secret-here
SESSION_TIMEOUT_HOURS=24

# API Base URL (for frontend to backend communication)
# This should match your deployment URL
API_BASE_URL=http://localhost:8000

# ====================
# Frontend/Branding Configuration
# ====================

# Use default branding instead of camp-specific branding (from config/branding.local.json)
# Set to true to test the generic UI fallbacks
USE_DEFAULT_BRANDING=false

# DEPRECATED: Other VITE_* variables are no longer used
# The frontend now uses direct URLs that are properly routed by Caddy/Vite proxy
# DO NOT SET THESE - they will be ignored:
# - VITE_API_URL (was for overriding API URL)
# - VITE_POCKETBASE_URL (was for overriding PocketBase URL)

# Vite dev server allowed origins (development only, optional)
# Comma-separated list of allowed origins for CORS when using Vite dev server
# Leave unset to allow all origins (default behavior)
# VITE_ALLOWED_ORIGINS=https://bunking-dev.yourdomain.com,http://localhost:3000

# ====================
# Service Configuration
# ====================

# Frontend port (default: 8080)
# nginx serves the frontend on this port
# Use 80 for production, 8080 for development
FRONTEND_PORT=8080

# Backend service hostnames and ports
# Change these if you rename containers or use different ports
POCKETBASE_HOST=bunking-pocketbase
POCKETBASE_PORT=8090
API_HOST=bunking-api
API_PORT=8000

# Environment detection (set automatically by docker-compose.yml)
# IS_DOCKER=true

# Timezone for sync scheduler
# Use standard timezone names from https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
TZ=America/Los_Angeles

# ====================
# OIDC Authentication (Production)
# ====================

# Enable OIDC authentication
OIDC_ENABLED=false

# OIDC provider configuration
# Only the issuer URL is required - endpoints are auto-discovered from:
#   {OIDC_ISSUER}/.well-known/openid-configuration
# For example: https://auth.yourdomain.com for Authentik, Pocket ID, etc.
OIDC_ISSUER=https://your-oidc-provider.com
OIDC_CLIENT_ID=camp-bunking-client
OIDC_CLIENT_SECRET=your-client-secret

# Redirect URI for OIDC callback
# This should match the URL where your app is hosted
# For Vite dev server: https://bunking-vite.yourdomain.com
# For nginx dev: https://bunking-dev.yourdomain.com
# For production: https://bunking.yourdomain.com
OIDC_REDIRECT_URI=https://bunking.yourdomain.com

# ====================
# Network Configuration
# ====================

# Set to true in production to isolate internal network
NETWORK_INTERNAL=false

# Docker image version (defaults to latest)
# Format: YYYY.MM.DD
IMAGE_TAG=2025.07.24

# ====================
# Traefik Configuration (Production)
# ====================

# External proxy network name (must match your Traefik network)
PROXY_NETWORK=web-proxy

# Domain configuration
DOMAIN_NAME=yourdomain.com
SUB_BUNKING=bunking

# Persistent storage path
APPDATA_DIR=/path/to/persistent/storage

# Credentials file path (optional)
CREDENTIALS_FILE=/path/to/.credentials.json
